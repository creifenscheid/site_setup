<f:comment>
    This partial can be used to render menus.

    Variables:
    - id
    - menu
    - label
    - additionalClasses (optional)
    - doNotRenderChildren (optional)
</f:comment>

<nav id="{id}" aria-labelledby="header_{id}">
    <f:if condition="{level}">
        <f:then>
            <f:variable name="headlineTag">h{level}</f:variable>
        </f:then>
        <f:else>
            <f:variable name="headlineTag" value="h2"/>
        </f:else>
    </f:if>
    <{headlineTag} id="header_{id}" class="sr-only">{label}</{headlineTag}>
<ul class="{id}{f:if(condition:additionalClasses, then: ' {additionalClasses}')}">
    <f:for each="{menu}" as="element">
        <f:if condition="{element.spacer}">
            <f:then>
                <li class="{id}__element menu-divider" data-level="1"><hr class="divider divider--menu" /></li>
            </f:then>
            <f:else>
                <li class="{id}__element" data-level="1">
                    <f:if condition="{element.hasSubpages} && {element.children} && !{doNotRenderChildren}">
                        <f:then>
                            <div class="{id}__submenu submenu">
                                <f:render partial="Rendering/Menu/ToggleButton" arguments="{id:id, element:element,parentId:element.data.uid}" />
                                <f:render partial="Rendering/Menu/Sublist" arguments="{id:id, parentId:element.data.uid, subpages:element.children, level:2}" />
                            </div>
                        </f:then>
                        <f:else>
                            <f:render partial="Rendering/Menu/Link" arguments="{id:id, element:element}" />
                        </f:else>
                    </f:if>
                </li>
            </f:else>
        </f:if>
    </f:for>
</ul>
</nav>
